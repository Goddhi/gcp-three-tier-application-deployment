# name: 'CI for frontend'

# on:
#   push: 
#     branches:
#     - main

# jobs:
#   build-frontend-image:
#     name: "build frontend image"
#     runs-on: 'ubuntu-latest'
  
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v3

#       - name: sonarqubu-code-checkk
#         working-directory: End-to-End-Kubernetes-Three-Tier-DevSecOps-Project/Application-Code/frontend 
#         uses: sonarsource/sonarcloud-github-action@v1.1
#         env:
#           SONAR_HOST_URL: ${{ secrets.SONAR_SERVER_URL  }}
#           SONAR_TOKEN: ${{  secrets.SONAR.TOKEN  }}
#         with:
#           args: >
#             -Dsonar.projectKey=three-tier-frontend
#             -Dsonar.projectName=three-tier-frontend
#             -Dsonar.sources=Application-Code/frontend  # Specify the source directory
#             -Dsonar.host.url=${{ secrets.SONAR_HOST_URL }}
#             -Dsonar.login=${{ secrets.SONAR_TOKEN }}

      
name: 'CI for frontend'

on:
  push: 
    branches:
      - main

jobs:
  build-frontend-image:
    name: "Build Frontend Image"
    runs-on: ubuntu-latest
  
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      # Set up Java 17
      - name: Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'

      # Verify the correct Java version
      - name: Verify Java Version
        run: java -version

      # Install SonarScanner
      - name: Install SonarScanner
        run: |
          wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.6.2.2472-linux.zip
          unzip sonar-scanner-cli-4.6.2.2472-linux.zip
          echo "SONAR_SCANNER_HOME=$PWD/sonar-scanner-4.6.2.2472-linux" >> $GITHUB_ENV
            echo "$PWD/sonar-scanner-4.6.2.2472-linux/bin" >> $GITHUB_PATH    # Run SonarQube Scan
      - name: Run SonarScanner
        run: |
          sonar-scanner \
            -Dsonar.projectKey=three-tier-frontend \
            -Dsonar.projectName=three-tier-frontend \
            -Dsonar.sources=Application-Code/frontend \
            -Dsonar.host.url=$SONAR_HOST_URL \
            -Dsonar.login=$SONAR_TOKEN
        env:
          SONAR_HOST_URL: ${{ secrets.SONAR_SERVER_URL }}
          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}





